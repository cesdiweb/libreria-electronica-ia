<!-- Archivo index.html corregido con carrito funcional -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Librer√≠a Electr√≥nica IA</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f3f6fa; color: #222; }
    header { background-color: #004080; color: white; padding: 1rem; text-align: center; }
    nav { display: flex; justify-content: center; gap: 1rem; background-color: #0066cc; padding: 0.5rem; }
    nav a { color: white; text-decoration: none; font-weight: bold; }
    .selector-container { display: flex; justify-content: center; gap: 1rem; margin: 1rem; flex-wrap: wrap; }
    .selector-container select { padding: 0.5rem; border-radius: 5px; }
    .catalogo { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; padding: 2rem; }
    .libro { background: white; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
    .libro img { max-width: 100%; height: auto; border-radius: 6px; }
    .libro h3 { margin: 0.5rem 0 0.3rem; }
    .libro p { margin: 0.3rem 0; }
    .carrito-btn { margin-top: 0.5rem; background-color: #007bff; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; }
    footer { background-color: #003366; color: white; text-align: center; padding: 1rem; margin-top: 2rem; }
    @media (max-width: 600px) {
      .selector-container { flex-direction: column; align-items: center; }
    }
  </style>
</head>
<body>
<header>
  <h1 id="titulo">Librer√≠a Electr√≥nica IA</h1>
  <p id="subtitulo">Tu librer√≠a digital inteligente e internacional</p>
</header>

<nav>
  <a href="index.html" id="nav-inicio">Inicio</a>
  <a href="catalogo.html" id="nav-catalogo">Cat√°logo</a>
  <a href="register.html" id="nav-registrarse">Registrarse</a>
  <a href="login.html" id="nav-iniciar">Iniciar Sesi√≥n</a>
  <a href="contacto.html" id="nav-contacto">Contacto</a>
</nav>

<div class="selector-container">
  <label>üåé Pa√≠s: <select id="country"></select></label>
  <label>üó£Ô∏è Idioma: <select id="language"></select></label>
  <label>üí∞ Moneda: <select id="currency"></select></label>
</div>

<section class="catalogo">
  <div class="libro">
    <img src="https://via.placeholder.com/150" alt="Libro 1">
    <h3>Introducci√≥n a la Inteligencia Artificial</h3>
    <p><strong>Autor:</strong> Ana P√©rez</p>
    <p class="price" data-base="30000">COP $ 30000</p>
    <button class="carrito-btn" onclick="agregarAlCarrito('Introducci√≥n a la Inteligencia Artificial', 30000)">Agregar al carrito</button>
  </div>
  <div class="libro">
    <img src="https://via.placeholder.com/150" alt="Libro 2">
    <h3>Machine Learning Avanzado</h3>
    <p><strong>Autor:</strong> John Smith</p>
    <p class="price" data-base="20">USD $ 20</p>
    <button class="carrito-btn" onclick="agregarAlCarrito('Machine Learning Avanzado', 20)">Agregar al carrito</button>
  </div>
  <div class="libro">
    <img src="https://via.placeholder.com/150" alt="Libro 3">
    <h3>Redes Neuronales con Python</h3>
    <p><strong>Autor:</strong> Mar√≠a L√≥pez</p>
    <p class="price" data-base="18">EUR ‚Ç¨ 18</p>
    <button class="carrito-btn" onclick="agregarAlCarrito('Redes Neuronales con Python', 18)">Agregar al carrito</button>
  </div>
</section>

<footer>
  <p>&copy; 2025 Librer√≠a Electr√≥nica IA. Todos los derechos reservados.</p>
</footer>

<script>
  const countriesData = [ { code: "CO", name: "Colombia", language: "es", currency: "COP $" }, { code: "US", name: "Estados Unidos", language: "en", currency: "USD $" }, { code: "ES", name: "Espa√±a", language: "es", currency: "EUR ‚Ç¨" } ];
  const languageNames = { es: "Espa√±ol", en: "Ingl√©s", fr: "Franc√©s", pt: "Portugu√©s", ja: "Japon√©s", de: "Alem√°n" };
  const translations = {
    es: { titulo: "Librer√≠a Electr√≥nica IA", subtitulo: "Tu librer√≠a digital inteligente e internacional", inicio: "Inicio", catalogo: "Cat√°logo", registrarse: "Registrarse", iniciar: "Iniciar Sesi√≥n", contacto: "Contacto" },
    en: { titulo: "AI Electronic Bookstore", subtitulo: "Your smart and international digital bookstore", inicio: "Home", catalogo: "Catalog", registrarse: "Sign Up", iniciar: "Login", contacto: "Contact" },
    fr: { titulo: "Librairie √âlectronique IA", subtitulo: "Votre librairie num√©rique intelligente et internationale", inicio: "Accueil", catalogo: "Catalogue", registrarse: "S'inscrire", iniciar: "Connexion", contacto: "Contact" }
  };

  const countrySelect = document.getElementById("country");
  const languageSelect = document.getElementById("language");
  const currencySelect = document.getElementById("currency");

  countriesData.forEach(c => {
    countrySelect.innerHTML += `<option value="${c.code}">${c.name}</option>`;
    if (!languageSelect.querySelector(`option[value="${c.language}"]`)) languageSelect.innerHTML += `<option value="${c.language}">${languageNames[c.language]}</option>`;
    if (!currencySelect.querySelector(`option[value="${c.currency}"]`)) currencySelect.innerHTML += `<option value="${c.currency}">${c.currency}</option>`;
  });

  countrySelect.onchange = () => {
    const sel = countriesData.find(c => c.code === countrySelect.value);
    languageSelect.value = sel.language;
    currencySelect.value = sel.currency;
    localStorage.setItem("country", sel.code);
    localStorage.setItem("language", sel.language);
    localStorage.setItem("currency", sel.currency);
    updatePrices(sel.currency);
    traducirTextos(sel.language);
  };

  languageSelect.onchange = () => {
    localStorage.setItem("language", languageSelect.value);
    traducirTextos(languageSelect.value);
  };

  currencySelect.onchange = () => {
    localStorage.setItem("currency", currencySelect.value);
    updatePrices(currencySelect.value);
  };

  function updatePrices(symbol) {
    document.querySelectorAll(".price").forEach(el => {
      const base = el.getAttribute("data-base");
      el.textContent = `${symbol} ${base}`;
    });
  }

  function traducirTextos(lang) {
    const t = translations[lang] || translations.es;
    document.getElementById("titulo").textContent = t.titulo;
    document.getElementById("subtitulo").textContent = t.subtitulo;
    document.getElementById("nav-inicio").textContent = t.inicio;
    document.getElementById("nav-catalogo").textContent = t.catalogo;
    document.getElementById("nav-registrarse").textContent = t.registrarse;
    document.getElementById("nav-iniciar").textContent = t.iniciar;
    document.getElementById("nav-contacto").textContent = t.contacto;
  }

  function agregarAlCarrito(nombre, precio) {
    let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    carrito.push({ nombre, precio });
    localStorage.setItem("carrito", JSON.stringify(carrito));
    alert(`"${nombre}" fue agregado al carrito.`);
  }

  window.onload = () => {
    const pais = localStorage.getItem("country") || "CO";
    const idioma = localStorage.getItem("language") || "es";
    const moneda = localStorage.getItem("currency") || "COP $";
    countrySelect.value = pais;
    languageSelect.value = idioma;
    currencySelect.value = moneda;
    updatePrices(moneda);
    traducirTextos(idioma);
  };
</script>
</body>
</html>

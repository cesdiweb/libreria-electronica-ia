<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carrito - Librer√≠a Electr√≥nica IA</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }
  header { background: linear-gradient(90deg, #4e54c8, #8f94fb); color: #fff; padding: 15px 20px; display: flex; flex-direction: column; }
  header h1 { margin: 0; font-size: 1.8em; }
  nav a { color: #fff; margin-right: 15px; text-decoration: none; font-weight: bold; }
  .header-info { margin-top: 10px; font-size: 0.95em; }
  main { padding: 20px; }
  .carrito-item { display: flex; align-items: center; justify-content: space-between; background: #fff; padding: 15px; margin-bottom: 15px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
  .carrito-item .titulo { flex: 2; font-weight: bold; color: #333; }
  .carrito-item .precio { flex: 1; text-align: right; margin-right: 10px; color: #4e54c8; font-weight: bold; }
  .carrito-item button { margin-left: 5px; padding: 6px 12px; cursor: pointer; border: none; border-radius: 6px; font-weight: bold; transition: 0.2s; }
  .carrito-item button:hover { opacity: 0.8; }
  .btn-aumentar { background-color: #4e54c8; color: #fff; }
  .btn-disminuir { background-color: #ff6b6b; color: #fff; }
  .btn-eliminar { background-color: #1dd1a1; color: #fff; }
  #carrito-total { font-weight: bold; font-size: 1.4em; margin-top: 20px; text-align: right; color: #333; }
  select { padding: 5px; margin-left: 10px; border-radius: 6px; border: 1px solid #ccc; }
</style>
</head>
<body>

<header>
  <h1>Librer√≠a Electr√≥nica IA</h1>
  <nav>
    <a href="index.html">Inicio</a>
    <a href="catalogo.html">Cat√°logo</a>
    <a href="carrito.html">Carrito</a>
    <a href="register.html">Registrarse</a>
    <a href="login.html">Iniciar Sesi√≥n</a>
    <a href="contacto.html">Contacto</a>
  </nav>
  <div class="header-info">
    üåé Pa√≠s: <span id="selected-country">Colombia</span>
    üó£Ô∏è Idioma: <span id="selected-language">Espa√±ol</span>
    üí∞ Moneda: 
    <select id="currency">
      <option value="COP $">COP $</option>
      <option value="USD $">USD $</option>
      <option value="EUR ‚Ç¨">EUR ‚Ç¨</option>
      <option value="AWG ∆í">AWG ∆í</option>
    </select>
  </div>
</header>

<main>
  <h2>Mi Carrito</h2>
  <div id="carrito-contenido"></div>
  <div id="carrito-total"></div>
</main>

<script>
const exchangeRates = {
  "COP": 1, "USD": 0.000255, "EUR": 0.000223, "AWG": 0.00014
};

function convertirPrecio(base, moneda) {
  const codigo = moneda.split(' ')[0];
  const tasa = exchangeRates[codigo] || 1;
  return Math.round(base * tasa);
}

function mostrarCarrito() {
  const contenedor = document.getElementById("carrito-contenido");
  contenedor.innerHTML = "";
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  const moneda = localStorage.getItem("selectedCurrency") || "COP $";
  let total = 0;

  carrito.forEach((item, index) => {
    const precioConvertido = convertirPrecio(item.precio, moneda);
    total += precioConvertido * item.cantidad;

    const div = document.createElement("div");
    div.className = "carrito-item";
    div.innerHTML = `
      <span class="titulo">${item.titulo} √ó ${item.cantidad}</span>
      <span class="precio">${moneda} ${precioConvertido * item.cantidad}</span>
      <button class="btn-aumentar" onclick="aumentar(${index})">Ôºã</button>
      <button class="btn-disminuir" onclick="disminuir(${index})">‚àí</button>
      <button class="btn-eliminar" onclick="eliminar(${index})">üóëÔ∏è</button>
    `;
    contenedor.appendChild(div);
  });

  document.getElementById("carrito-total").textContent = `Total: ${moneda} ${total}`;
}

function aumentar(i) {
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  carrito[i].cantidad++;
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

function disminuir(i) {
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  if (carrito[i].cantidad > 1) carrito[i].cantidad--;
  else carrito.splice(i,1);
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

function eliminar(i) {
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  carrito.splice(i,1);
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

function actualizarMoneda() {
  const currencySelect = document.getElementById("currency");
  localStorage.setItem("selectedCurrency", currencySelect.value);
  mostrarCarrito();
}

document.addEventListener("DOMContentLoaded", () => {
  const savedCurrency = localStorage.getItem("selectedCurrency");
  if(savedCurrency) document.getElementById("currency").value = savedCurrency;
  mostrarCarrito();
  document.getElementById("currency").addEventListener("change", actualizarMoneda);
});
</script>

</body>
</html>

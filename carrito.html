<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carrito - Librer√≠a Electr√≥nica IA</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f3f6fa; margin:0; padding:0; color:#222; }
    header { background-color:#004080; color:white; text-align:center; padding:1rem; }
    nav { display:flex; justify-content:center; gap:1rem; background:#0066cc; padding:0.5rem; }
    nav a { color:white; text-decoration:none; font-weight:bold; }
    .carrito-container { max-width:800px; margin:2rem auto; background:white; padding:1rem; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
    .item { display:flex; justify-content: space-between; align-items:center; padding:0.5rem 0; border-bottom:1px solid #ddd; }
    .item:last-child { border-bottom:none; }
    .controls button { margin:0 0.2rem; }
    .total { text-align:right; font-weight:bold; margin-top:1rem; font-size:1.2rem; }
    .empty { text-align:center; font-style:italic; color:#555; margin:2rem 0; }
  </style>
</head>
<body>
<header>
  <h1>Carrito de Compras</h1>
</header>
<nav>
  <a href="index.html">Inicio</a>
  <a href="register.html">Registrarse</a>
  <a href="login.html">Iniciar Sesi√≥n</a>
  <a href="contacto.html">Contacto</a>
</nav>

<div class="carrito-container" id="carrito-container">
  <!-- Items se llenar√°n din√°micamente -->
</div>

<div class="total" id="total"></div>

<script>
const exchangeRates = {
  "COP": 1,
  "USD": 0.000255,
  "EUR": 0.000223,
  "MXN": 0.0042,
  "BRL": 0.0011,
  "ARS": 0.22,
  "GBP": 0.00020,
  "CNY": 0.0017,
  "JPY": 0.037,
  "KRW": 0.32,
  "AWG": 0.00043
  // a√±ade m√°s seg√∫n tu index
};

// Funci√≥n para actualizar precios seg√∫n moneda seleccionada
function convertirPrecio(base) {
  const moneda = localStorage.getItem("selectedCurrency") || "COP $";
  const codigo = moneda.split(' ')[0];
  const rate = exchangeRates[codigo] || 1;
  return {precio: Math.round(base * rate), moneda};
}

// Cargar carrito
function mostrarCarrito() {
  let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  const container = document.getElementById("carrito-container");
  container.innerHTML = "";

  if(carrito.length === 0) {
    container.innerHTML = `<p class="empty">El carrito est√° vac√≠o.</p>`;
    document.getElementById("total").textContent = "";
    return;
  }

  let total = 0;

  carrito.forEach((item, index) => {
    const {precio, moneda} = convertirPrecio(item.precio);
    total += precio * item.cantidad;

    const itemDiv = document.createElement("div");
    itemDiv.className = "item";
    itemDiv.innerHTML = `
      <div>
        <strong>${item.titulo}</strong><br>
        Autor: ${item.autor}<br>
        Precio unitario: ${moneda} ${precio}
      </div>
      <div class="controls">
        <button onclick="modificarCantidad(${index}, -1)">‚àí</button>
        ${item.cantidad}
        <button onclick="modificarCantidad(${index}, 1)">Ôºã</button>
        <button onclick="eliminarItem(${index})">üóëÔ∏è</button>
      </div>
    `;
    container.appendChild(itemDiv);
  });

  document.getElementById("total").textContent = `Total: ${carrito.length ? convertirPrecio(0).moneda + " " + total : ""}`;
}

// Modificar cantidad
function modificarCantidad(index, cambio) {
  let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  carrito[index].cantidad += cambio;
  if(carrito[index].cantidad < 1) carrito[index].cantidad = 1;
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

// Eliminar item
function eliminarItem(index) {
  let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  carrito.splice(index, 1);
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

// Inicializar
mostrarCarrito();
</script>
</body>
</html>

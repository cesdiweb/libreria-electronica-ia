<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carrito - Librer√≠a Electr√≥nica IA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 20px;
    }
    h1 {
      color: #004080;
      text-align: center;
    }
    #carrito div {
      background: white;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    button {
      margin: 2px;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .plus { background: #4CAF50; color: white; }
    .minus { background: #FF9800; color: white; }
    .delete { background: #F44336; color: white; }
    .clear { background: #555; color: white; display: block; margin: 10px auto; }
    .pagar { background: #004080; color: white; display: block; margin: 10px auto; }
  </style>
</head>
<body>
  <h1>üõí Carrito de Compras</h1>
  <div id="carrito"></div>
  <h2 id="total">Total: COP 0</h2>
  <button class="clear" onclick="vaciarCarrito()">Vaciar carrito</button>
  <button class="pagar" onclick="pagarWompi()">Pagar con Wompi (Prueba)</button>

  <script>
    // Tasas de conversi√≥n (ejemplo est√°tico)
    const tasas = {
      COP: 1,
      USD: 0.00025,
      EUR: 0.00023,
      MXN: 0.0044
    };

    function mostrarCarrito() {
      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
      let moneda = localStorage.getItem("moneda") || "COP";

      let carritoDiv = document.getElementById("carrito");
      carritoDiv.innerHTML = "";

      let total = 0;

      carrito.forEach((item, index) => {
        let precioConvertido = item.precio * tasas[moneda];
        let subtotal = precioConvertido * item.cantidad;
        total += subtotal;

        carritoDiv.innerHTML += `
          <div>
            <p><b>${item.nombre}</b></p>
            <p>Precio: ${moneda} ${precioConvertido.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} √ó ${item.cantidad}</p>
            <button class="plus" onclick="cambiarCantidad(${index}, 1)">Ôºã</button>
            <button class="minus" onclick="cambiarCantidad(${index}, -1)">‚àí</button>
            <button class="delete" onclick="eliminarDelCarrito(${index})">üóëÔ∏è</button>
          </div>
        `;
      });

      document.getElementById("total").textContent =
        "Total: " + moneda + " " + total.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function cambiarCantidad(index, cambio) {
      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
      carrito[index].cantidad += cambio;
      if (carrito[index].cantidad <= 0) carrito.splice(index, 1);
      localStorage.setItem("carrito", JSON.stringify(carrito));
      mostrarCarrito();
    }

    function eliminarDelCarrito(index) {
      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
      carrito.splice(index, 1);
      localStorage.setItem("carrito", JSON.stringify(carrito));
      mostrarCarrito();
    }

    function vaciarCarrito() {
      localStorage.removeItem("carrito");
      mostrarCarrito();
    }

    function pagarWompi() {
      alert("Aqu√≠ se integrar√° el pago con Wompi en modo prueba üöÄ");
    }

    window.onload = mostrarCarrito;
  </script>
</body>
</html>

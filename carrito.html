<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito - Librer√≠a Electr√≥nica IA</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    header { background: #333; color: #fff; padding: 10px 20px; }
    header h1 { margin: 0; font-size: 1.5em; }
    nav a { color: #fff; margin-right: 15px; text-decoration: none; }
    main { padding: 20px; }
    .carrito-item { display: flex; align-items: center; justify-content: space-between; background: #fff; padding: 10px; margin-bottom: 10px; border-radius: 5px; }
    .carrito-item .titulo { flex: 2; }
    .carrito-item .precio { flex: 1; text-align: right; margin-right: 10px; }
    .carrito-item button { margin-left: 5px; padding: 5px 10px; cursor: pointer; border: none; background: #007BFF; color: #fff; border-radius: 3px; }
    .carrito-item button:hover { background: #0056b3; }
    #carrito-total { font-weight: bold; font-size: 1.2em; margin-top: 20px; }
    select { padding: 5px; margin-left: 10px; }
  </style>
</head>
<body>

<header>
  <h1>Librer√≠a Electr√≥nica IA</h1>
  <nav>
    <a href="index.html">Inicio</a>
    <a href="catalogo.html">Cat√°logo</a>
    <a href="carrito.html">Carrito</a>
    <a href="register.html">Registrarse</a>
    <a href="login.html">Iniciar Sesi√≥n</a>
    <a href="contacto.html">Contacto</a>
  </nav>
  <div>
    üåé Pa√≠s: <span id="selected-country">Colombia</span>
    üó£Ô∏è Idioma: <span id="selected-language">Espa√±ol</span>
    üí∞ Moneda: 
    <select id="currency">
      <option value="COP $">COP $</option>
      <option value="USD $">USD $</option>
      <option value="EUR ‚Ç¨">EUR ‚Ç¨</option>
      <option value="AWG ∆í">AWG ∆í</option>
      <!-- Agrega m√°s monedas seg√∫n tu lista -->
    </select>
  </div>
</header>

<main>
  <h2>Mi Carrito</h2>
  <div id="carrito-contenido"></div>
  <div id="carrito-total"></div>
</main>

<script>
/* ===========================
   Exchange rates
   =========================== */
const exchangeRates = {
  "COP": 1, "USD": 0.000255, "EUR": 0.000223, "MXN": 0.0042,
  "BRL": 0.0011, "ARS": 0.22, "GBP": 0.00020, "CNY": 0.0017,
  "JPY": 0.037, "KRW": 0.32, "AWG": 0.00014 // ejemplo
};

/* ===========================
   Funci√≥n para convertir precio
   =========================== */
function convertirPrecio(base, moneda) {
  const codigo = moneda.split(' ')[0];
  const tasa = exchangeRates[codigo] || 1;
  return Math.round(base * tasa);
}

/* ===========================
   Mostrar carrito
   =========================== */
function mostrarCarrito() {
  const contenedor = document.getElementById("carrito-contenido");
  contenedor.innerHTML = "";
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  const moneda = localStorage.getItem("selectedCurrency") || "COP $";
  let total = 0;

  carrito.forEach((item, index) => {
    const precioConvertido = convertirPrecio(item.precio, moneda);
    total += precioConvertido * item.cantidad;

    const div = document.createElement("div");
    div.className = "carrito-item";
    div.innerHTML = `
      <span class="titulo">${item.titulo} √ó ${item.cantidad}</span>
      <span class="precio">${moneda} ${precioConvertido * item.cantidad}</span>
      <button onclick="aumentar(${index})">Ôºã</button>
      <button onclick="disminuir(${index})">‚àí</button>
      <button onclick="eliminar(${index})">üóëÔ∏è</button>
    `;
    contenedor.appendChild(div);
  });

  document.getElementById("carrito-total").textContent = `Total: ${moneda} ${total}`;
}

/* ===========================
   Funciones de cantidad
   =========================== */
function aumentar(i) {
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  carrito[i].cantidad++;
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

function disminuir(i) {
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  if (carrito[i].cantidad > 1) {
    carrito[i].cantidad--;
  } else {
    carrito.splice(i, 1);
  }
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

function eliminar(i) {
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  carrito.splice(i, 1);
  localStorage.setItem("carrito", JSON.stringify(carrito));
  mostrarCarrito();
}

/* ===========================
   Actualizar moneda
   =========================== */
function actualizarMoneda() {
  const currencySelect = document.getElementById("currency");
  localStorage.setItem("selectedCurrency", currencySelect.value);
  mostrarCarrito();
}

/* ===========================
   Inicializaci√≥n al cargar
   =========================== */
document.addEventListener("DOMContentLoaded", () => {
  // Cargar moneda guardada
  const savedCurrency = localStorage.getItem("selectedCurrency");
  if(savedCurrency){
    document.getElementById("currency").value = savedCurrency;
  }

  mostrarCarrito();

  // Evento cambio de moneda
  document.getElementById("currency").addEventListener("change", actualizarMoneda);
});
</script>

</body>
</html>

 <script>
    const countriesData = [
      { code: "CO", name: "Colombia", language: "es", currency: "COP $" },
      { code: "US", name: "Estados Unidos", language: "en", currency: "USD $" },
      { code: "MX", name: "MÃ©xico", language: "es", currency: "MXN $" },
      { code: "ES", name: "EspaÃ±a", language: "es", currency: "EUR â‚¬" },
      { code: "FR", name: "Francia", language: "fr", currency: "EUR â‚¬" },
      { code: "BR", name: "Brasil", language: "pt", currency: "BRL R$" },
      { code: "AR", name: "Argentina", language: "es", currency: "ARS $" },
      { code: "JP", name: "JapÃ³n", language: "ja", currency: "JPY Â¥" },
      { code: "KR", name: "Corea del Sur", language: "ko", currency: "KRW â‚©" },
      { code: "IN", name: "India", language: "hi", currency: "INR â‚¹" },
      { code: "CN", name: "China", language: "zh", currency: "CNY Â¥" },
      { code: "GB", name: "Reino Unido", language: "en", currency: "GBP Â£" },
      { code: "CA", name: "CanadÃ¡", language: "en", currency: "CAD $" },
      { code: "AU", name: "Australia", language: "en", currency: "AUD $" }
    ];

    // Agregar paÃ­ses adicionales
    countriesData.push(
      { code: "AL", name: "Albania", language: "sq", currency: "ALL L" },
{ code: "DZ", name: "Argelia", language: "ar", currency: "DZD Ø¯Ø¬" },
{ code: "AM", name: "Armenia", language: "hy", currency: "AMD Ö" },
{ code: "AZ", name: "AzerbaiyÃ¡n", language: "az", currency: "AZN â‚¼" },
{ code: "BH", name: "BarÃ©in", language: "ar", currency: "BHD .Ø¯.Ø¨" },
{ code: "BY", name: "Bielorrusia", language: "be", currency: "BYN Br" },
{ code: "BT", name: "ButÃ¡n", language: "dz", currency: "BTN Nu." },
{ code: "KH", name: "Camboya", language: "km", currency: "KHR áŸ›" },
{ code: "CM", name: "CamerÃºn", language: "fr", currency: "XAF FCFA" },
{ code: "CY", name: "Chipre", language: "el", currency: "EUR â‚¬" },
{ code: "EE", name: "Estonia", language: "et", currency: "EUR â‚¬" },
{ code: "GE", name: "Georgia", language: "ka", currency: "GEL â‚¾" },
{ code: "GH", name: "Ghana", language: "en", currency: "GHS â‚µ" },
{ code: "IS", name: "Islandia", language: "is", currency: "ISK kr" },
{ code: "KZ", name: "KazajistÃ¡n", language: "kk", currency: "KZT â‚¸" },
{ code: "KW", name: "Kuwait", language: "ar", currency: "KWD Ø¯.Ùƒ" },
{ code: "LA", name: "Laos", language: "lo", currency: "LAK â‚­" },
{ code: "LV", name: "Letonia", language: "lv", currency: "EUR â‚¬" },
{ code: "LT", name: "Lituania", language: "lt", currency: "EUR â‚¬" },
{ code: "LU", name: "Luxemburgo", language: "fr", currency: "EUR â‚¬" },
      { code: "DE", name: "Alemania", language: "de", currency: "EUR â‚¬" },
      { code: "IT", name: "Italia", language: "it", currency: "EUR â‚¬" },
      { code: "RU", name: "Rusia", language: "ru", currency: "RUB â‚½" },
      { code: "TR", name: "TurquÃ­a", language: "tr", currency: "TRY â‚º" },
      { code: "SA", name: "Arabia Saudita", language: "ar", currency: "SAR ï·¼" },
      { code: "EG", name: "Egipto", language: "ar", currency: "EGP Â£" },
      { code: "ZA", name: "SudÃ¡frica", language: "en", currency: "ZAR R" },
      { code: "NG", name: "Nigeria", language: "en", currency: "NGN â‚¦" },
      { code: "KE", name: "Kenia", language: "sw", currency: "KES KSh" },
      { code: "PK", name: "PakistÃ¡n", language: "ur", currency: "PKR â‚¨" },
      { code: "BD", name: "BangladÃ©s", language: "bn", currency: "BDT à§³" },
      { code: "ID", name: "Indonesia", language: "id", currency: "IDR Rp" },
      { code: "PH", name: "Filipinas", language: "tl", currency: "PHP â‚±" },
      { code: "VN", name: "Vietnam", language: "vi", currency: "VND â‚«" },
      { code: "TH", name: "Tailandia", language: "th", currency: "THB à¸¿" },
      { code: "MY", name: "Malasia", language: "ms", currency: "MYR RM" },
      { code: "SG", name: "Singapur", language: "en", currency: "SGD $" },
      { code: "NZ", name: "Nueva Zelanda", language: "en", currency: "NZD $" },
      { code: "IE", name: "Irlanda", language: "en", currency: "EUR â‚¬" },
      { code: "NL", name: "PaÃ­ses Bajos", language: "nl", currency: "EUR â‚¬" },
      { code: "SE", name: "Suecia", language: "sv", currency: "SEK kr" },
      { code: "NO", name: "Noruega", language: "no", currency: "NOK kr" },
      { code: "FI", name: "Finlandia", language: "fi", currency: "EUR â‚¬" },
      { code: "DK", name: "Dinamarca", language: "da", currency: "DKK kr" },
      { code: "PL", name: "Polonia", language: "pl", currency: "PLN zÅ‚" },
      { code: "CZ", name: "Chequia", language: "cs", currency: "CZK KÄ" },
      { code: "GR", name: "Grecia", language: "el", currency: "EUR â‚¬" },
      { code: "HU", name: "HungrÃ­a", language: "hu", currency: "HUF Ft" },
      { code: "RO", name: "Rumania", language: "ro", currency: "RON lei" },
      { code: "UA", name: "Ucrania", language: "uk", currency: "UAH â‚´" },
      { code: "CH", name: "Suiza", language: "de", currency: "CHF Fr" },
      { code: "AT", name: "Austria", language: "de", currency: "EUR â‚¬" },
      { code: "BE", name: "BÃ©lgica", language: "fr", currency: "EUR â‚¬" },
      { code: "IL", name: "Israel", language: "he", currency: "ILS â‚ª" },
      { code: "IR", name: "IrÃ¡n", language: "fa", currency: "IRR ï·¼" },
      { code: "IQ", name: "Irak", language: "ar", currency: "IQD Ø¹.Ø¯" },
      { code: "CL", name: "Chile", language: "es", currency: "CLP $" },
      { code: "PE", name: "PerÃº", language: "es", currency: "PEN S/" },
      { code: "VE", name: "Venezuela", language: "es", currency: "VES Bs" },
      { code: "BO", name: "Bolivia", language: "es", currency: "BOB Bs." },
      { code: "EC", name: "Ecuador", language: "es", currency: "USD $" },
      { code: "PY", name: "Paraguay", language: "es", currency: "PYG â‚²" },
      { code: "UY", name: "Uruguay", language: "es", currency: "UYU $" },
      { code: "CR", name: "Costa Rica", language: "es", currency: "CRC â‚¡" },
      { code: "GT", name: "Guatemala", language: "es", currency: "GTQ Q" },
      { code: "DO", name: "RepÃºblica Dominicana", language: "es", currency: "DOP RD$" },
      { code: "CU", name: "Cuba", language: "es", currency: "CUP $" },
      { code: "HN", name: "Honduras", language: "es", currency: "HNL L" },
      
      // 30 paÃ­ses nuevos
{ code: "AT", name: "Austria", language: "de", currency: "EUR â‚¬" },
{ code: "BE", name: "BÃ©lgica", language: "nl", currency: "EUR â‚¬" },
{ code: "HR", name: "Croacia", language: "hr", currency: "HRK kn" },
{ code: "CY", name: "Chipre", language: "el", currency: "EUR â‚¬" },
{ code: "EE", name: "Estonia", language: "et", currency: "EUR â‚¬" },
{ code: "FI", name: "Finlandia", language: "fi", currency: "EUR â‚¬" },
{ code: "GR", name: "Grecia", language: "el", currency: "EUR â‚¬" },
{ code: "IE", name: "Irlanda", language: "en", currency: "EUR â‚¬" },
{ code: "LV", name: "Letonia", language: "lv", currency: "EUR â‚¬" },
{ code: "LT", name: "Lituania", language: "lt", currency: "EUR â‚¬" },
{ code: "LU", name: "Luxemburgo", language: "fr", currency: "EUR â‚¬" },
{ code: "MT", name: "Malta", language: "mt", currency: "EUR â‚¬" },
{ code: "NL", name: "PaÃ­ses Bajos", language: "nl", currency: "EUR â‚¬" },
{ code: "PT", name: "Portugal", language: "pt", currency: "EUR â‚¬" },
{ code: "SK", name: "Eslovaquia", language: "sk", currency: "EUR â‚¬" },
{ code: "SI", name: "Eslovenia", language: "sl", currency: "EUR â‚¬" },
{ code: "CZ", name: "Chequia", language: "cs", currency: "CZK KÄ" },
{ code: "HU", name: "HungrÃ­a", language: "hu", currency: "HUF Ft" },
{ code: "RO", name: "Rumania", language: "ro", currency: "RON lei" },
{ code: "BG", name: "Bulgaria", language: "bg", currency: "BGN Ð»Ð²" },
{ code: "CH", name: "Suiza", language: "de", currency: "CHF Fr" },
{ code: "NO", name: "Noruega", language: "no", currency: "NOK kr" },
{ code: "SE", name: "Suecia", language: "sv", currency: "SEK kr" },
{ code: "DK", name: "Dinamarca", language: "da", currency: "DKK kr" },
{ code: "IS", name: "Islandia", language: "is", currency: "ISK kr" },
{ code: "UA", name: "Ucrania", language: "uk", currency: "UAH â‚´" },
{ code: "BG", name: "Bulgaria", language: "bg", currency: "BGN Ð»Ð²" },
{ code: "HR", name: "Croacia", language: "hr", currency: "HRK kn" },
{ code: "RS", name: "Serbia", language: "sr", currency: "RSD Ð´Ð¸Ð½" },
{ code: "TR", name: "TurquÃ­a", language: "tr", currency: "TRY â‚º" },
{ code: "EG", name: "Egipto", language: "ar", currency: "EGP Â£" },
      
      // 30 paÃ­ses nuevos con idioma y moneda
{ code: "AF", name: "AfganistÃ¡n",          language: "ps", currency: "AFN Ø‹" },
{ code: "AO", name: "Angola",              language: "pt", currency: "AOA Kz" },
{ code: "AW", name: "Aruba",               language: "nl", currency: "AWG Æ’" },
{ code: "BB", name: "Barbados",            language: "en", currency: "BBD $" },
{ code: "BN", name: "BrunÃ©i",              language: "ms", currency: "BND $" },
{ code: "BT", name: "ButÃ¡n",               language: "dz", currency: "BTN Nu." },
{ code: "CV", name: "Cabo Verde",          language: "pt", currency: "CVE $" },
{ code: "DJ", name: "Yibuti",              language: "fr", currency: "DJF Fdj" },
{ code: "DM", name: "Dominica",            language: "en", currency: "XCD $" },
{ code: "ER", name: "Eritrea",             language: "ti", currency: "ERN â‚¨" },
{ code: "FJ", name: "Fiyi",                language: "en", currency: "FJD $" },
{ code: "GD", name: "Granada",             language: "en", currency: "XCD $" },
{ code: "GN", name: "Guinea",              language: "fr", currency: "GNF FG" },
{ code: "GW", name: "Guinea-BisÃ¡u",        language: "pt", currency: "XOF CFA" },
{ code: "HT", name: "HaitÃ­",               language: "fr", currency: "HTG G" },
{ code: "KI", name: "Kiribati",            language: "en", currency: "AUD $" },
{ code: "KM", name: "Comoras",             language: "ar", currency: "KMF CF" },
{ code: "LS", name: "Lesotho",             language: "en", currency: "LSL M" },
{ code: "MH", name: "Islas Marshall",      language: "en", currency: "USD $" },
{ code: "MR", name: "Mauritania",          language: "ar", currency: "MRU UM" },
{ code: "MU", name: "Mauricio",            language: "en", currency: "MUR â‚¹" },
{ code: "NR", name: "Nauru",               language: "en", currency: "AUD $" },
{ code: "PA", name: "PanamÃ¡",              language: "es", currency: "PAB B/." },
{ code: "WS", name: "Samoa",               language: "en", currency: "WST WS$" },
{ code: "ST", name: "Santo TomÃ© y PrÃ­ncipe", language: "pt", currency: "STN Db" },
{ code: "TO", name: "Tonga",               language: "to", currency: "TOP T$" },
{ code: "TV", name: "Tuvalu",              language: "en", currency: "AUD $" },
{ code: "VU", name: "Vanuatu",             language: "bi", currency: "VUV VT" },
{ code: "VC", name: "San Vicente y las Granadinas", language: "en", currency: "XCD $" },
{ code: "LC", name: "Santa LucÃ­a",         language: "en", currency: "XCD $" }


    )

    const languageNames = {
      es: "EspaÃ±ol", en: "InglÃ©s", fr: "FrancÃ©s", pt: "PortuguÃ©s", ja: "JaponÃ©s",
      ko: "Coreano", hi: "Hindi", zh: "Chino",
      de: "AlemÃ¡n", it: "Italiano", ru: "Ruso", tr: "Turco", ar: "Ãrabe", sw: "Suajili",
      ur: "Urdu", bn: "BengalÃ­", id: "Indonesio", tl: "Tagalo", vi: "Vietnamita",
      th: "TailandÃ©s", ms: "Malayo", nl: "NeerlandÃ©s", sv: "Sueco", no: "Noruego",
      fi: "FinlandÃ©s", da: "DanÃ©s", pl: "Polaco", cs: "Checo", el: "Griego",
      hu: "HÃºngaro", ro: "Rumano", uk: "Ucraniano", he: "Hebreo", fa: "Persa",   sq: "AlbanÃ©s",
      hy: "Armenio", az: "AzerÃ­", be: "Bielorruso", dz: "Dzongkha", km: "Jemer", et: "Estonio",
      ka: "Georgiano", is: "IslandÃ©s", kk: "Kazajo", lo: "Lao", lv: "LetÃ³n",   lt: "Lituano",
      bg: "BÃºlgaro", hr: "Croata", et: "Estonio", mt: "MaltÃ©s", sk: "Eslovaco", sl: "Esloveno",
      cs: "Checo", sr: "Serbio", 
      // Al final de tu languageNames:
      ps: "Pashto", ti: "TigriÃ±a", bi: "Bislama", dv: "Divehi", ne: "NepalÃ­", my: "Birmano",
      zh: "Chino", ca: "CatalÃ¡n", hr: "Croata", sl: "Esloveno", sk: "Eslovaco", bg: "BÃºlgaro",
      bs: "Bosnio", mk: "Macedonio", sq: "AlbanÃ©s", sr: "Serbio", et: "Estonio", ka: "Georgiano",
      lo: "Laosiano", km: "Jemer", az: "AzerÃ­", hy: "Armenio", et: "Estonio", tl: "Tagalo",
      dv: "Divehi", rw: "Kinyarwanda", kn: "CanarÃ©s", pa: "PanyabÃ­", en: "InglÃ©s", pt: "PortuguÃ©s"


     };
    

    const countrySelect = document.getElementById("country");
    const languageSelect = document.getElementById("language");
    const currencySelect = document.getElementById("currency");

    countriesData.forEach(country => {
      countrySelect.innerHTML += `<option value="${country.code}">${country.name}</option>`;

      if (!languageSelect.querySelector(`option[value='${country.language}']`)) {
        const langName = languageNames[country.language] || country.language;
        languageSelect.innerHTML += `<option value="${country.language}">${langName}</option>`;
      }

      if (!currencySelect.querySelector(`option[value='${country.currency}']`)) {
        currencySelect.innerHTML += `<option value="${country.currency}">${country.currency}</option>`;
      }
    });

    function updatePrices(symbol) {
      const prices = document.querySelectorAll(".price");
      prices.forEach(el => {
        const base = el.getAttribute("data-base");
        el.textContent = `${symbol} ${base}`;
      });
    }

    countrySelect.onchange = () => {
      const country = countrySelect.value;
      const selected = countriesData.find(c => c.code === country);
      languageSelect.value = selected.language;
      currencySelect.value = selected.currency;
      localStorage.setItem('country', country);
      localStorage.setItem('language', selected.language);
      localStorage.setItem('currency', selected.currency);
      updatePrices(selected.currency);
    };

    languageSelect.onchange = () => {
      localStorage.setItem('language', languageSelect.value);
      alert("Idioma cambiado a: " + (languageNames[languageSelect.value] || languageSelect.value));
    };

    currencySelect.onchange = () => {
      localStorage.setItem('currency', currencySelect.value);
      updatePrices(currencySelect.value);
    };
fetch("https://ipapi.co/json/")
  .then(response => response.json())
  .then(data => {
    const countryCode = data.country_code || "CO";
    const countryData = countriesData.find(c => c.code === countryCode);

    if (countryData) {
      localStorage.setItem("country", countryData.code);
      localStorage.setItem("language", countryData.language);
      localStorage.setItem("currency", countryData.currency);
    }
  })
  .catch(error => console.error("Error al detectar ubicaciÃ³n por IP:", error));


    window.onload = () => {
      const savedCountry = localStorage.getItem("country") || "CO";
      const savedLanguage = localStorage.getItem("language") || "es";
      const savedCurrency = localStorage.getItem("currency") || "COP $";

      countrySelect.value = savedCountry;
      languageSelect.value = savedLanguage;
      currencySelect.value = savedCurrency;
      updatePrices(savedCurrency);
aplicarTraduccion();

    };
const translations = {
  es: {
    "Inicio": "Inicio",
    "CatÃ¡logo": "CatÃ¡logo",
    "Registrarse": "Registrarse",
    "Iniciar SesiÃ³n": "Iniciar SesiÃ³n",
    "Contacto": "Contacto",
    "Agregar al carrito": "Agregar al carrito",
    "Tu librerÃ­a digital inteligente e internacional": "Tu librerÃ­a digital inteligente e internacional"
  },
  en: {
    "Inicio": "Home",
    "CatÃ¡logo": "Catalog",
    "Registrarse": "Register",
    "Iniciar SesiÃ³n": "Login",
    "Contacto": "Contact",
    "Agregar al carrito": "Add to cart",
    "Tu librerÃ­a digital inteligente e internacional": "Your smart and international digital bookstore"
  },
  fr: {
    "Inicio": "Accueil",
    "CatÃ¡logo": "Catalogue",
    "Registrarse": "S'inscrire",
    "Iniciar SesiÃ³n": "Connexion",
    "Contacto": "Contact",
    "Agregar al carrito": "Ajouter au panier",
    "Tu librerÃ­a digital inteligente e internacional": "Votre librairie numÃ©rique intelligente et internationale"
  },
  // puedes aÃ±adir mÃ¡s idiomas despuÃ©s
};

function aplicarTraduccion() {
  const lang = localStorage.getItem('language') || 'es';
  const dict = translations[lang];
  if (!dict) return;

  document.querySelectorAll("nav a, .carrito-btn, header p").forEach(el => {
    if (dict[el.textContent]) {
      el.textContent = dict[el.textContent];
    }
  });
}

  </script>
<script>
  // ... Todo tu cÃ³digo actual arriba ...

  // FunciÃ³n para agregar al carrito
  function agregarAlCarrito(titulo, autor, precio, moneda) {
    const carrito = JSON.parse(localStorage.getItem("carrito")) || [];

    const producto = {
      titulo,
      autor,
      precio,
      moneda,
      cantidad: 1
    };

    const existente = carrito.find(item => item.titulo === titulo && item.moneda === moneda);
    if (existente) {
      existente.cantidad += 1;
    } else {
      carrito.push(producto);
    }

    localStorage.setItem("carrito", JSON.stringify(carrito));
    alert(`ðŸ“š ${titulo} aÃ±adido al carrito.`);
  }

  // Asignar evento a cada botÃ³n del catÃ¡logo
  document.querySelectorAll(".carrito-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const contenedor = btn.closest(".libro");
      const titulo = contenedor.querySelector("h3").textContent;
      const autor = contenedor.querySelector("p strong").nextSibling.textContent.trim();
      const precio = contenedor.querySelector(".price").getAttribute("data-base");
      const moneda = contenedor.querySelector(".price").textContent.split(" ")[0];

      agregarAlCarrito(titulo, autor, precio, moneda);
    });
  });
</script>

</body>
</html>

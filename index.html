<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Librer√≠a Electr√≥nica IA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f3f6fa;
      color: #222;
    }
    header {
      background-color: #004080;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 1rem;
      background-color: #0066cc;
      padding: 0.5rem;
    }
    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }
    .selector-container {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem;
      flex-wrap: wrap;
    }
    .selector-container select {
      padding: 0.5rem;
      border-radius: 5px;
    }
    .catalogo {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      padding: 2rem;
    }
    .libro {
      background: white;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      text-align: center;
    }
    .libro img {
      max-width: 100%;
      height: auto;
      border-radius: 6px;
    }
    .libro h3 {
      margin: 0.5rem 0 0.3rem;
    }
    .libro p {
      margin: 0.3rem 0;
    }
    .carrito-btn {
      margin-top: 0.5rem;
      background-color: #007bff;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
    }
    footer {
      background-color: #003366;
      color: white;
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
    }
    @media (max-width: 600px) {
      .selector-container {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Librer√≠a Electr√≥nica IA</h1>
    <p>Tu librer√≠a digital inteligente e internacional</p>
  </header>

  <nav>
    <a href="#">Inicio</a>
    <a href="#">Cat√°logo</a>
    <a href="#">Registrarse</a>
    <a href="#">Iniciar Sesi√≥n</a>
    <a href="#">Contacto</a>
  </nav>

  <div class="selector-container">
    <label>üåé Pa√≠s:
      <select id="country"></select>
    </label>
    <label>üó£Ô∏è Idioma:
      <select id="language"></select>
    </label>
    <label>üí∞ Moneda:
      <select id="currency"></select>
    </label>
  </div>

  <section class="catalogo">
    <div class="libro">
      <img src="https://via.placeholder.com/150" alt="Libro 1">
      <h3>Introducci√≥n a la Inteligencia Artificial</h3>
      <p><strong>Autor:</strong> Ana P√©rez</p>
      <p class="price" data-base="30000">COP $ 30000</p>
      <button class="carrito-btn">Agregar al carrito</button>
    </div>
    <div class="libro">
      <img src="https://via.placeholder.com/150" alt="Libro 2">
      <h3>Machine Learning Avanzado</h3>
      <p><strong>Autor:</strong> John Smith</p>
      <p class="price" data-base="20">USD $ 20</p>
      <button class="carrito-btn">Agregar al carrito</button>
    </div>
    <div class="libro">
      <img src="https://via.placeholder.com/150" alt="Libro 3">
      <h3>Redes Neuronales con Python</h3>
      <p><strong>Autor:</strong> Mar√≠a L√≥pez</p>
      <p class="price" data-base="18">EUR ‚Ç¨ 18</p>
      <button class="carrito-btn">Agregar al carrito</button>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Librer√≠a Electr√≥nica IA. Todos los derechos reservados.</p>
  </footer>

 <script>
  const countriesData = [
  { code: "AF", name: "Afganist√°n", language: "ps", currency: "AFN ÿã" },
  { code: "AL", name: "Albania", language: "sq", currency: "ALL L" },
  { code: "DE", name: "Alemania", language: "de", currency: "EUR ‚Ç¨" },
  { code: "AO", name: "Angola", language: "pt", currency: "AOA Kz" },
  { code: "SA", name: "Arabia Saudita", language: "ar", currency: "SAR Ô∑º" },
  { code: "DZ", name: "Argelia", language: "ar", currency: "DZD ÿØÿ¨" },
  { code: "AR", name: "Argentina", language: "es", currency: "ARS $" },
  { code: "AM", name: "Armenia", language: "hy", currency: "AMD ÷è" },
  { code: "AW", name: "Aruba", language: "nl", currency: "AWG ∆í" },
  { code: "AU", name: "Australia", language: "en", currency: "AUD $" },
  { code: "AT", name: "Austria", language: "de", currency: "EUR ‚Ç¨" },
  { code: "AZ", name: "Azerbaiy√°n", language: "az", currency: "AZN ‚Çº" },
  { code: "BD", name: "Banglad√©s", language: "bn", currency: "BDT ‡ß≥" },
  { code: "BB", name: "Barbados", language: "en", currency: "BBD $" },
  { code: "BH", name: "Bar√©in", language: "ar", currency: "BHD .ÿØ.ÿ®" },
  { code: "BY", name: "Bielorrusia", language: "be", currency: "BYN Br" },
  { code: "BE", name: "B√©lgica", language: "fr", currency: "EUR ‚Ç¨" },
  { code: "BO", name: "Bolivia", language: "es", currency: "BOB Bs." },
  { code: "BA", name: "Bosnia y Herzegovina", language: "bs", currency: "BAM KM" }, // si no exist√≠a, puedes a√±adir la entrada correcta
  { code: "BR", name: "Brasil", language: "pt", currency: "BRL R$" },
  { code: "BN", name: "Brun√©i", language: "ms", currency: "BND $" },
  { code: "BG", name: "Bulgaria", language: "bg", currency: "BGN –ª–≤" },
  { code: "CV", name: "Cabo Verde", language: "pt", currency: "CVE $" },
  { code: "KH", name: "Camboya", language: "km", currency: "KHR ·üõ" },
  { code: "CM", name: "Camer√∫n", language: "fr", currency: "XAF FCFA" },
  { code: "CA", name: "Canad√°", language: "en", currency: "CAD $" },
  { code: "CL", name: "Chile", language: "es", currency: "CLP $" },
  { code: "CN", name: "China", language: "zh", currency: "CNY ¬•" },
  { code: "CO", name: "Colombia", language: "es", currency: "COP $" },
  { code: "CR", name: "Costa Rica", language: "es", currency: "CRC ‚Ç°" },
  { code: "CU", name: "Cuba", language: "es", currency: "CUP $" },
  { code: "CY", name: "Chipre", language: "el", currency: "EUR ‚Ç¨" },
  { code: "CZ", name: "Chequia", language: "cs", currency: "CZK Kƒç" },
  { code: "DK", name: "Dinamarca", language: "da", currency: "DKK kr" },
  { code: "DO", name: "Rep√∫blica Dominicana", language: "es", currency: "DOP RD$" },
  { code: "EC", name: "Ecuador", language: "es", currency: "USD $" },
  { code: "EG", name: "Egipto", language: "ar", currency: "EGP ¬£" },
  { code: "SV", name: "El Salvador", language: "es", currency: "USD $" }, // si aplica
  { code: "EE", name: "Estonia", language: "et", currency: "EUR ‚Ç¨" },
  { code: "ER", name: "Eritrea", language: "ti", currency: "ERN ‚Ç®" },
  { code: "FI", name: "Finlandia", language: "fi", currency: "EUR ‚Ç¨" },
  { code: "FR", name: "Francia", language: "fr", currency: "EUR ‚Ç¨" },
  { code: "GE", name: "Georgia", language: "ka", currency: "GEL ‚Çæ" },
  { code: "DE", name: "Alemania", language: "de", currency: "EUR ‚Ç¨" },
  { code: "GH", name: "Ghana", language: "en", currency: "GHS ‚Çµ" },
  { code: "GR", name: "Grecia", language: "el", currency: "EUR ‚Ç¨" },
  { code: "GT", name: "Guatemala", language: "es", currency: "GTQ Q" },
  { code: "GN", name: "Guinea", language: "fr", currency: "GNF FG" },
  { code: "GW", name: "Guinea-Bis√°u", language: "pt", currency: "XOF CFA" },
  { code: "HT", name: "Hait√≠", language: "fr", currency: "HTG G" },
  { code: "HN", name: "Honduras", language: "es", currency: "HNL L" },
  { code: "HK", name: "Hong Kong", language: "zh", currency: "HKD $" }, // si lo necesitas
  { code: "HU", name: "Hungr√≠a", language: "hu", currency: "HUF Ft" },
  { code: "IS", name: "Islandia", language: "is", currency: "ISK kr" },
  { code: "IN", name: "India", language: "hi", currency: "INR ‚Çπ" },
  { code: "ID", name: "Indonesia", language: "id", currency: "IDR Rp" },
  { code: "IR", name: "Ir√°n", language: "fa", currency: "IRR Ô∑º" },
  { code: "IQ", name: "Irak", language: "ar", currency: "IQD ÿπ.ÿØ" },
  { code: "IE", name: "Irlanda", language: "en", currency: "EUR ‚Ç¨" },
  { code: "IL", name: "Israel", language: "he", currency: "ILS ‚Ç™" },
  { code: "IT", name: "Italia", language: "it", currency: "EUR ‚Ç¨" },
  { code: "JP", name: "Jap√≥n", language: "ja", currency: "JPY ¬•" },
  { code: "JO", name: "Jordania", language: "ar", currency: "JOD ÿØ.ÿß" }, // opcional
  { code: "KZ", name: "Kazajist√°n", language: "kk", currency: "KZT ‚Ç∏" },
  { code: "KE", name: "Kenia", language: "sw", currency: "KES KSh" },
  { code: "KR", name: "Corea del Sur", language: "ko", currency: "KRW ‚Ç©" },
  { code: "KW", name: "Kuwait", language: "ar", currency: "KWD ÿØ.ŸÉ" },
  { code: "KG", name: "Kirguist√°n", language: "ky", currency: "KGS —Å–æ–º" }, // opcional
  { code: "LA", name: "Laos", language: "lo", currency: "LAK ‚Ç≠" },
  { code: "LV", name: "Letonia", language: "lv", currency: "EUR ‚Ç¨" },
  { code: "LB", name: "L√≠bano", language: "ar", currency: "LBP ŸÑ.ŸÑ" }, // opcional
  { code: "LT", name: "Lituania", language: "lt", currency: "EUR ‚Ç¨" },
  { code: "LU", name: "Luxemburgo", language: "fr", currency: "EUR ‚Ç¨" },
  { code: "MK", name: "Macedonia del Norte", language: "mk", currency: "MKD –¥–µ–Ω" }, // opcional
  { code: "MG", name: "Madagascar", language: "fr", currency: "MGA Ar" }, // opcional
  { code: "MW", name: "Malawi", language: "en", currency: "MWK MK" }, // opcional
  { code: "MY", name: "Malasia", language: "ms", currency: "MYR RM" },
  { code: "MV", name: "Maldivas", language: "dv", currency: "MVR ﬁÉ" }, // opcional
  { code: "MT", name: "Malta", language: "mt", currency: "EUR ‚Ç¨" },
  { code: "MH", name: "Islas Marshall", language: "en", currency: "USD $" },
  { code: "MU", name: "Mauricio", language: "en", currency: "MUR ‚Çπ" },
  { code: "MR", name: "Mauritania", language: "ar", currency: "MRU UM" },
  { code: "MX", name: "M√©xico", language: "es", currency: "MXN $" },
  { code: "FM", name: "Micronesia", language: "en", currency: "USD $" }, // opcional
  { code: "MD", name: "Moldavia", language: "ro", currency: "MDL L" }, // opcional
  { code: "MC", name: "M√≥naco", language: "fr", currency: "EUR ‚Ç¨" }, // opcional
  { code: "MN", name: "Mongolia", language: "mn", currency: "MNT ‚ÇÆ" }, // opcional
  { code: "ME", name: "Montenegro", language: "sr", currency: "EUR ‚Ç¨" }, // opcional
  { code: "MA", name: "Marruecos", language: "ar", currency: "MAD ÿØ.ŸÖ." }, // opcional
  { code: "MZ", name: "Mozambique", language: "pt", currency: "MZN MTn" }, // opcional
  { code: "MM", name: "Myanmar", language: "my", currency: "MMK K" }, // opcional
  { code: "NA", name: "Namibia", language: "en", currency: "NAD $" }, // opcional
  { code: "NR", name: "Nauru", language: "en", currency: "AUD $" },
  { code: "NP", name: "Nepal", language: "ne", currency: "NPR ‚Ç®" }, // opcional
  { code: "NL", name: "Pa√≠ses Bajos", language: "nl", currency: "EUR ‚Ç¨" },
  { code: "NZ", name: "Nueva Zelanda", language: "en", currency: "NZD $" },
  { code: "NI", name: "Nicaragua", language: "es", currency: "NIO C$" }, // opcional
  { code: "NE", name: "N√≠ger", language: "fr", currency: "XOF CFA" }, // opcional
  { code: "NG", name: "Nigeria", language: "en", currency: "NGN ‚Ç¶" },
  { code: "NO", name: "Noruega", language: "no", currency: "NOK kr" },
  { code: "OM", name: "Om√°n", language: "ar", currency: "OMR ÿ±.ÿπ." }, // opcional
  { code: "PK", name: "Pakist√°n", language: "ur", currency: "PKR ‚Ç®" },
  { code: "PA", name: "Panam√°", language: "es", currency: "PAB B/." },
  { code: "PG", name: "Pap√∫a Nueva Guinea", language: "en", currency: "PGK K" }, // opcional
  { code: "PY", name: "Paraguay", language: "es", currency: "PYG ‚Ç≤" },
  { code: "PE", name: "Per√∫", language: "es", currency: "PEN S/" },
  { code: "PH", name: "Filipinas", language: "tl", currency: "PHP ‚Ç±" },
  { code: "PL", name: "Polonia", language: "pl", currency: "PLN z≈Ç" },
  { code: "PT", name: "Portugal", language: "pt", currency: "EUR ‚Ç¨" },
  { code: "PR", name: "Puerto Rico", language: "es", currency: "USD $" }, // opcional
  { code: "QA", name: "Qatar", language: "ar", currency: "QAR ÿ±.ŸÇ" }, // opcional
  { code: "RO", name: "Rumania", language: "ro", currency: "RON lei" },
  { code: "RU", name: "Rusia", language: "ru", currency: "RUB ‚ÇΩ" },
  { code: "RS", name: "Serbia", language: "sr", currency: "RSD –¥–∏–Ω" },
  { code: "SC", name: "Seychelles", language: "fr", currency: "SCR $" }, // opcional
  { code: "SG", name: "Singapur", language: "en", currency: "SGD $" },
  { code: "SK", name: "Eslovaquia", language: "sk", currency: "EUR ‚Ç¨" },
  { code: "SI", name: "Eslovenia", language: "sl", currency: "EUR ‚Ç¨" },
  { code: "SB", name: "Islas Salom√≥n", language: "en", currency: "SBD $" }, // opcional
  { code: "ZA", name: "Sud√°frica", language: "en", currency: "ZAR R" },
  { code: "KR", name: "Corea del Sur", language: "ko", currency: "KRW ‚Ç©" },
  { code: "ES", name: "Espa√±a", language: "es", currency: "EUR ‚Ç¨" },
  { code: "LK", name: "Sri Lanka", language: "si", currency: "LKR Rs" }, // opcional
  { code: "SD", name: "Sud√°n", language: "ar", currency: "SDG ÿ¨.ÿ≥." }, // opcional
  { code: "SE", name: "Suecia", language: "sv", currency: "SEK kr" },
  { code: "CH", name: "Suiza", language: "de", currency: "CHF Fr" },
  { code: "SY", name: "Siria", language: "ar", currency: "SYP ŸÑ.ÿ≥" }, // opcional
  { code: "TW", name: "Taiw√°n", language: "zh", currency: "TWD $" }, // opcional
  { code: "TJ", name: "Tayikist√°n", language: "tg", currency: "TJS –õ" }, // opcional
  { code: "TZ", name: "Tanzania", language: "sw", currency: "TZS Sh" }, // opcional
  { code: "TH", name: "Tailandia", language: "th", currency: "THB ‡∏ø" },
  { code: "TL", name: "Timor Oriental", language: "pt", currency: "USD $" }, // opcional
  { code: "TG", name: "Togo", language: "fr", currency: "XOF CFA" }, // opcional
  { code: "TO", name: "Tonga", language: "to", currency: "TOP T$" },
  { code: "TT", name: "Trinidad y Tobago", language: "en", currency: "TTD $" }, // opcional
  { code: "TN", name: "T√∫nez", language: "ar", currency: "TND ÿØ.ÿ™" }, // opcional
  { code: "TR", name: "Turqu√≠a", language: "tr", currency: "TRY ‚Ç∫" },
  { code: "TM", name: "Turkmenist√°n", language: "tk", currency: "TMT m" }, // opcional
  { code: "TV", name: "Tuvalu", language: "en", currency: "AUD $" },
  { code: "UG", name: "Uganda", language: "en", currency: "UGX Sh" }, // opcional
  { code: "UA", name: "Ucrania", language: "uk", currency: "UAH ‚Ç¥" },
  { code: "AE", name: "Emiratos √Årabes Unidos", language: "ar", currency: "AED ÿØ.ÿ•" }, // opcional
  { code: "GB", name: "Reino Unido", language: "en", currency: "GBP ¬£" },
  { code: "US", name: "Estados Unidos", language: "en", currency: "USD $" },
  { code: "UY", name: "Uruguay", language: "es", currency: "UYU $" },
  { code: "UZ", name: "Uzbekist√°n", language: "uz", currency: "UZS so'm" }, // opcional
  { code: "VU", name: "Vanuatu", language: "bi", currency: "VUV VT" },
  { code: "VE", name: "Venezuela", language: "es", currency: "VES Bs" },
  { code: "VN", name: "Vietnam", language: "vi", currency: "VND ‚Ç´" },
  { code: "YE", name: "Yemen", language: "ar", currency: "YER Ô∑º" }, // opcional
  { code: "ZM", name: "Zambia", language: "en", currency: "ZMW K" }, // opcional
  { code: "ZW", name: "Zimbabue", language: "en", currency: "ZWL $" }, // opcional
  { code: "VC", name: "San Vicente y las Granadinas", language: "en", currency: "XCD $" },
  { code: "LC", name: "Santa Luc√≠a", language: "en", currency: "XCD $" }
];
</script>


    const languageNames = {
      es: "Espa√±ol", en: "Ingl√©s", fr: "Franc√©s", pt: "Portugu√©s", ja: "Japon√©s",
      ko: "Coreano", hi: "Hindi", zh: "Chino",
      de: "Alem√°n", it: "Italiano", ru: "Ruso", tr: "Turco", ar: "√Årabe", sw: "Suajili",
      ur: "Urdu", bn: "Bengal√≠", id: "Indonesio", tl: "Tagalo", vi: "Vietnamita",
      th: "Tailand√©s", ms: "Malayo", nl: "Neerland√©s", sv: "Sueco", no: "Noruego",
      fi: "Finland√©s", da: "Dan√©s", pl: "Polaco", cs: "Checo", el: "Griego",
      hu: "H√∫ngaro", ro: "Rumano", uk: "Ucraniano", he: "Hebreo", fa: "Persa",   sq: "Alban√©s",
      hy: "Armenio", az: "Azer√≠", be: "Bielorruso", dz: "Dzongkha", km: "Jemer", et: "Estonio",
      ka: "Georgiano", is: "Island√©s", kk: "Kazajo", lo: "Lao", lv: "Let√≥n",   lt: "Lituano",
      bg: "B√∫lgaro", hr: "Croata", et: "Estonio", mt: "Malt√©s", sk: "Eslovaco", sl: "Esloveno",
      cs: "Checo", sr: "Serbio", 
      // Al final de tu languageNames:
      ps: "Pashto", ti: "Tigri√±a", bi: "Bislama", dv: "Divehi", ne: "Nepal√≠", my: "Birmano",
      zh: "Chino", ca: "Catal√°n", hr: "Croata", sl: "Esloveno", sk: "Eslovaco", bg: "B√∫lgaro",
      bs: "Bosnio", mk: "Macedonio", sq: "Alban√©s", sr: "Serbio", et: "Estonio", ka: "Georgiano",
      lo: "Laosiano", km: "Jemer", az: "Azer√≠", hy: "Armenio", et: "Estonio", tl: "Tagalo",
      dv: "Divehi", rw: "Kinyarwanda", kn: "Canar√©s", pa: "Panyab√≠", en: "Ingl√©s", pt: "Portugu√©s"


     };
    
   // ===========================
// 2Ô∏è‚É£ Nombres de idiomas (limpio y sin duplicados)
// ===========================
const languageNames = {
  ar: "√Årabe",
  az: "Azer√≠",
  be: "Bielorruso",
  bg: "B√∫lgaro",
  bn: "Bengal√≠",
  bs: "Bosnio",
  ca: "Catal√°n",
  cs: "Checo",
  da: "Dan√©s",
  de: "Alem√°n",
  dv: "Divehi",
  dz: "Dzongkha",
  el: "Griego",
  en: "Ingl√©s",
  es: "Espa√±ol",
  et: "Estonio",
  fa: "Persa",
  fi: "Fin√©s",
  fr: "Franc√©s",
  he: "Hebreo",
  hi: "Hindi",
  hr: "Croata",
  hu: "H√∫ngaro",
  hy: "Armenio",
  id: "Indonesio",
  is: "Island√©s",
  it: "Italiano",
  ja: "Japon√©s",
  ka: "Georgiano",
  kk: "Kazajo",
  km: "Jemer",
  kn: "Canar√©s",
  ko: "Coreano",
  lo: "Lao",
  lt: "Lituano",
  lv: "Let√≥n",
  mk: "Macedonio",
  ms: "Malayo",
  mt: "Malt√©s",
  my: "Birmano",
  ne: "Nepal√≠",
  nl: "Neerland√©s",
  no: "Noruego",
  pa: "Panyab√≠",
  pl: "Polaco",
  ps: "Past√∫n",
  pt: "Portugu√©s",
  ro: "Rumano",
  rw: "Kinyarwanda",
  sk: "Eslovaco",
  sl: "Esloveno",
  sm: "Samoano",
  sq: "Alban√©s",
  sr: "Serbio",
  sv: "Sueco",
  sw: "Suajili",
  th: "Tailand√©s",
  ti: "Tigri√±a",
  tl: "Tagalo",
  to: "Tongano",
  tr: "Turco",
  uk: "Ucraniano",
  ur: "Urdu",
  vi: "Vietnamita",
  zh: "Chino"
};
  
// ===========================
// Poblado de selects + persistencia + detecci√≥n IP
// ===========================
const countrySelect = document.getElementById("country");
const languageSelect = document.getElementById("language");
const currencySelect = document.getElementById("currency");

// Limpiar (por si hab√≠a algo) y ordenar pa√≠ses
countrySelect.innerHTML = "";
languageSelect.innerHTML = "";
currencySelect.innerHTML = "";

// Ordenar (ya lo dejamos ordenado en el array, pero por seguridad lo ordenamos aqu√≠)
countriesData.sort((a, b) => a.name.localeCompare(b.name, "es", { sensitivity: "base" }));

countriesData.forEach(country => {
  countrySelect.innerHTML += `<option value="${country.code}">${country.name}</option>`;

  if (!languageSelect.querySelector(`option[value='${country.language}']`)) {
    const langName = languageNames[country.language] || country.language;
    languageSelect.innerHTML += `<option value="${country.language}">${langName}</option>`;
  }

  if (!currencySelect.querySelector(`option[value='${country.currency}']`)) {
    currencySelect.innerHTML += `<option value='${country.currency}'>${country.currency}</option>`;
  }
});

// Leer guardado (convenci√≥n: selected*)
let savedCountry = localStorage.getItem("selectedCountry");
let savedLanguage = localStorage.getItem("selectedLanguage");
let savedCurrency = localStorage.getItem("selectedCurrency");

// Si no hab√≠a nada guardado, usar Colombia como fallback y guardar idioma/moneda por defecto
if (!savedCountry) {
  savedCountry = "CO";
  const def = countriesData.find(c => c.code === savedCountry);
  if (def) {
    savedLanguage = def.language;
    savedCurrency = def.currency;
    localStorage.setItem("selectedCountry", savedCountry);
    localStorage.setItem("selectedLanguage", savedLanguage);
    localStorage.setItem("selectedCurrency", savedCurrency);
  }
}

// Aplicar valores a selects
countrySelect.value = savedCountry || "CO";
languageSelect.value = savedLanguage || countrySelect.querySelector("option")?.value || "es";
currencySelect.value = savedCurrency || countrySelect.querySelector("option")?.value || "COP $";

// Eventos
countrySelect.onchange = () => {
  const selected = countriesData.find(c => c.code === countrySelect.value);
  if (!selected) return;
  languageSelect.value = selected.language;
  currencySelect.value = selected.currency;
  localStorage.setItem("selectedCountry", selected.code);
  localStorage.setItem("selectedLanguage", selected.language);
  localStorage.setItem("selectedCurrency", selected.currency);
  if (typeof updatePrices === "function") updatePrices(selected.currency);
};

languageSelect.onchange = () => {
  localStorage.setItem("selectedLanguage", languageSelect.value);
  // opcional: sin alert si prefieres UX m√°s limpio
  // alert("Idioma cambiado a: " + (languageNames[languageSelect.value] || languageSelect.value));
};

currencySelect.onchange = () => {
  localStorage.setItem("selectedCurrency", currencySelect.value);
  if (typeof updatePrices === "function") updatePrices(currencySelect.value);
};

// Detecci√≥n por IP: solo si no hay country ya guardado (no sobrescribir elecci√≥n manual)
if (!localStorage.getItem("selectedCountry")) {
  fetch("https://ipapi.co/json/")
    .then(res => res.ok ? res.json() : null)
    .then(data => {
      if (!data || !data.country) return;
      const matched = countriesData.find(c => c.code === data.country);
      if (matched) {
        countrySelect.value = matched.code;
        languageSelect.value = matched.language;
        currencySelect.value = matched.currency;
        localStorage.setItem("selectedCountry", matched.code);
        localStorage.setItem("selectedLanguage", matched.language);
        localStorage.setItem("selectedCurrency", matched.currency);
        if (typeof updatePrices === "function") updatePrices(matched.currency);
      }
    }).catch(err => {
      // fallo en IP: no hacemos nada (queda Colombia o lo guardado)
      console.warn("ip detect error:", err);
    });
}


// ===========================
// 4Ô∏è‚É£ Inicializar selects
// ===========================
let savedCountry = localStorage.getItem("selectedCountry");
let savedLanguage = localStorage.getItem("selectedLanguage");
let savedCurrency = localStorage.getItem("selectedCurrency");

// Si no hay nada guardado, inicializar con Colombia
if (!savedCountry) {
  savedCountry = "CO";
  const defaultData = countriesData.find(c => c.code === savedCountry);
  localStorage.setItem("selectedCountry", savedCountry);
  localStorage.setItem("selectedLanguage", defaultData.language);
  localStorage.setItem("selectedCurrency", defaultData.currency);
}

// Aplicar valores a los selects
const selectedCountryData = countriesData.find(c => c.code === savedCountry);
if (selectedCountryData) {
  countrySelect.value = savedCountry;
  languageSelect.value = savedLanguage || selectedCountryData.language;
  currencySelect.value = savedCurrency || selectedCountryData.currency;
}

// ===========================
// 5Ô∏è‚É£ Eventos de cambio
// ===========================
countrySelect.onchange = () => {
  const selected = countriesData.find(c => c.code === countrySelect.value);
  languageSelect.value = selected.language;
  currencySelect.value = selected.currency;
  localStorage.setItem("selectedCountry", selected.code);
  localStorage.setItem("selectedLanguage", selected.language);
  localStorage.setItem("selectedCurrency", selected.currency);
  updatePrices(selected.currency);
};

languageSelect.onchange = () => {
  localStorage.setItem("selectedLanguage", languageSelect.value);
  alert("Idioma cambiado a: " + (languageNames[languageSelect.value] || languageSelect.value));
};

currencySelect.onchange = () => {
  localStorage.setItem("selectedCurrency", currencySelect.value);
  updatePrices(currencySelect.value);
};

// ===========================
// 6Ô∏è‚É£ Detecci√≥n autom√°tica por IP
// ===========================
fetch("https://ipapi.co/json/")
  .then(response => response.json())
  .then(data => {
    // Solo si el usuario no tiene un pa√≠s guardado manualmente
    if (!localStorage.getItem("selectedCountry")) {
      const ipCountry = data.country;
      const matched = countriesData.find(c => c.code === ipCountry);
      if (matched) {
        countrySelect.value = matched.code;
        languageSelect.value = matched.language;
        currencySelect.value = matched.currency;
        updatePrices(matched.currency);
        localStorage.setItem("selectedCountry", matched.code);
        localStorage.setItem("selectedLanguage", matched.language);
        localStorage.setItem("selectedCurrency", matched.currency);
      }
    }
  });



    // ===========================
    // 7Ô∏è‚É£ Cargar valores guardados
    // ===========================
    window.onload = () => {
      const savedCountry = localStorage.getItem("country") || "CO";
      const savedLanguage = localStorage.getItem("language") || "es";
      const savedCurrency = localStorage.getItem("currency") || "COP $";
      countrySelect.value = savedCountry;
      languageSelect.value = savedLanguage;
      currencySelect.value = savedCurrency;
      updatePrices(savedCurrency);
    };
  </script>
</body>
</html>







